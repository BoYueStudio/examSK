(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["components/sunui-upimg/sunui-upimg-tencent"],{2802:function(e,t,n){},"4b4b":function(e,t,n){"use strict";n.r(t);var u=n("a0f4"),r=n.n(u);for(var i in u)"default"!==i&&function(e){n.d(t,e,function(){return u[e]})}(i);t["default"]=r.a},"56dc":function(e,t,n){"use strict";var u=n("2802"),r=n.n(u);r.a},"6dfb":function(e,t,n){"use strict";n.r(t);var u=n("b3e2"),r=n("4b4b");for(var i in r)"default"!==i&&function(e){n.d(t,e,function(){return r[e]})}(i);n("56dc");var c=n("2877"),a=Object(c["a"])(r["default"],u["a"],u["b"],!1,null,"132f32b7",null);t["default"]=a.exports},a0f4:function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var u=r(n("a34a"));function r(e){return e&&e.__esModule?e:{default:e}}function i(e,t,n,u,r,i,c){try{var a=e[i](c),o=a.value}catch(s){return void n(s)}a.done?t(o):Promise.resolve(o).then(u,r)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(u,r){var c=e.apply(t,n);function a(e){i(c,u,r,a,o,"next",e)}function o(e){i(c,u,r,a,o,"throw",e)}a(void 0)})}}var a=n("c9aa"),o={data:function(){return{upload_after_list:[],upload_picture_list:[]}},name:"sunui-upimg",props:{upImgConfig:{type:Object}},methods:{chooseImage:function(e){f(this,parseInt(e),this.upImgConfig)},uploadimage:function(e){l(this,e)},deleteImg:function(e){p(e,this)},previewImg:function(e){_(e,this)},previewImgs:function(e){h(e,this)}}};t.default=o;var s=function(){var e=c(u.default.mark(function e(t,n,r,i){var c,o,s,l;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return c={Bucket:n.cosConfig.Bucket,Region:n.cosConfig.Region,SecretId:n.cosConfig.SecretId,SecretKey:n.cosConfig.SecretKey},o=new a({getAuthorization:function(e,t){var n=a.getAuthorization({SecretId:c.SecretId,SecretKey:c.SecretKey,Method:e.Method,Key:e.Key});t(n)}}),s=r[i]["path"],l=s.substr(s.lastIndexOf("/")+1),o.postObject({Bucket:c.Bucket,Region:c.Region,Key:l,FilePath:s},function(e,t){null==e?(console.log("%c 腾讯云上传(成功返回地址):".concat(t.headers.Location),"color:#1AAD19"," at components\\sunui-upimg\\sunui-upimg-tencent.vue:117"),r[i]["path_server"]=t.headers.Location,r[i]["upload_percent"]=100):console.log("%c 腾讯云上传失败:".concat(JSON.stringify(e)),"color:#f00"," at components\\sunui-upimg\\sunui-upimg-tencent.vue:121")}),e.next=7,t.$emit("onUpImg",r);case 7:t.upload_picture_list=r;case 8:case"end":return e.stop()}},e,this)}));return function(t,n,u,r){return e.apply(this,arguments)}}(),l=function(){var e=c(u.default.mark(function e(t,n){var r,i;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:r=0,i=t.upload_picture_list.length;case 1:if(!(r<i)){e.next=8;break}if(0!=t.upload_picture_list[r]["upload_percent"]){e.next=5;break}return e.next=5,s(t,n,t.upload_picture_list,r);case 5:r++,e.next=1;break;case 8:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),p=function(){var e=c(u.default.mark(function e(t,n){return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,n.$emit("onImgDel",{url:t.currentTarget.dataset.url,index:t.currentTarget.dataset.index});case 2:n.upload_picture_list.splice(t.currentTarget.dataset.index,1),n.upload_after_list.splice(t.currentTarget.dataset.index,1),n.upload_picture_list=n.upload_picture_list;case 5:case"end":return e.stop()}},e,this)}));return function(t,n){return e.apply(this,arguments)}}(),f=function(t,n,r){var i={cosConfig:{Bucket:r.cosConfig.Bucket,Region:r.cosConfig.Region,SecretId:r.cosConfig.SecretId,SecretKey:r.cosConfig.SecretKey},count:n,notli:r.notli,sourceType:r.sourceType,sizeType:r.sizeType,tips:r.tips||!1};e.chooseImage({count:i.notli?i.count=9:0==t.upload_after_list.length?i.count:i.count-t.upload_after_list.length,sizeType:""==i.sizeType||void 0==i.sizeType||1==i.sizeType?["compressed"]:["original"],sourceType:""==i.sourceType||void 0==i.sourceType?["album","camera"]:"camera"==i.sourceType?["camera"]:"album"==i.sourceType?["album"]:["album","camera"],success:function(){var e=c(u.default.mark(function e(n){var r,c;return u.default.wrap(function(e){while(1)switch(e.prev=e.next){case 0:for(r=0,c=n.tempFiles.length;r<c;r++)n.tempFiles[r]["upload_percent"]=0,n.tempFiles[r]["path_server"]="",t.upload_picture_list.push(n.tempFiles[r]),t.upload_picture_list.length>i.count&&(t.upload_picture_list=t.upload_picture_list.slice(0,i.count));return e.next=3,d(t,n,i);case 3:case"end":return e.stop()}},e,this)}));function n(t){return e.apply(this,arguments)}return n}()})},d=function(e,t,n){!n.notli&&n.count==e.upload_picture_list.length&&l(e,n),n.notli&&9==n.count&&l(e,n),e.upload_after_list=e.upload_after_list.concat(t.tempFilePaths).slice(0,n.count),e.upload_picture_list=e.upload_picture_list.slice(0,n.count)},_=function(t,n){for(var u=[],r=0,i=n.upload_picture_list.length;r<i;r++)u.push(n.upload_picture_list[r].path);e.previewImage({current:n.upload_picture_list[t.currentTarget.dataset.index].path,urls:u})},h=function(){var t=c(u.default.mark(function t(n,r){return u.default.wrap(function(t){while(1)switch(t.prev=t.next){case 0:e.previewImage({current:r.upload_after_list[n.currentTarget.dataset.idx],urls:r.upload_after_list});case 1:case"end":return t.stop()}},t,this)}));return function(e,n){return t.apply(this,arguments)}}()}).call(this,n("6e42")["default"])},b3e2:function(e,t,n){"use strict";var u=function(){var e=this,t=e.$createElement;e._self._c},r=[];n.d(t,"a",function(){return u}),n.d(t,"b",function(){return r})}}]);
;(global["webpackJsonp"] = global["webpackJsonp"] || []).push([
    'components/sunui-upimg/sunui-upimg-tencent-create-component',
    {
        'components/sunui-upimg/sunui-upimg-tencent-create-component':(function(module, exports, __webpack_require__){
            __webpack_require__('6e42')['createComponent'](__webpack_require__("6dfb"))
        })
    },
    [['components/sunui-upimg/sunui-upimg-tencent-create-component']]
]);                
